(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(2),c=t(14),i=t.n(c),s=t(3),a=t(4),u=t.n(a),d="/api/persons",l=function(){return u.a.get(d).then((function(e){return e.data}))},f=function(e){return console.log(e),u.a.post(d,e).then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},h={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},p=function(e){var n=e.notification;if(null===n)return null;var t=h;return"green"===n.type&&(t=m),Object(o.jsx)("div",{style:t,children:n.message})},O=function(e){var n=e.setSearchName;return Object(o.jsxs)("div",{children:["filter shown with",Object(o.jsx)("input",{onChange:function(e){n(e.target.value)}})]})},g=function(e){var n=e.persons,t=e.setPersons,r=e.newName,c=e.setNewName,i=e.newNumber,s=e.setNumber,a=e.setNotification;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o=n.find((function(e){return e.name===r}));if(n.includes(o)){if(window.confirm("".concat(r," is already added to phonebook, replace the old number with a new one?"))){var c={name:r,number:i};b(o.id,c).then((function(e){t(n.map((function(n){return n.id!==e.id?n:e}))),a({message:"Updated ".concat(e.name),type:"green"}),setTimeout((function(){a(null)}),5e3)})).catch((function(e){a({message:"Information of ".concat(o.name," has already been removed from server"),type:"red"}),setTimeout((function(){a(null)}),5e3),t(n.filter((function(e){return e.id!==o.id})))}))}}else f({name:r,number:i}).then((function(e){t(n.concat(e)),a({message:"Added ".concat(e.name),type:"green"}),setTimeout((function(){a(null)}),5e3)})).catch((function(e){return console.log(e)}))},children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{onChange:function(e){c(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number:",Object(o.jsx)("input",{onChange:function(e){s(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.person,t=e.persons,r=e.setPersons,c=e.setNotification;return Object(o.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name," ?"))&&(j(n.id),r(t.filter((function(e){return e.id!==n.id}))),c({message:"Deleted ".concat(n.name),type:"red"}),setTimeout((function(){c(null)}),5e3))},children:"delete"})},v=function(e){var n=e.searchName,t=e.persons,r=e.setPersons,c=e.setNotification,i=t.filter((function(e){return!!e.name.toLocaleLowerCase().includes(n)}));return Object(o.jsx)("div",{children:Object(o.jsx)("ul",{children:i.map((function(e){return Object(o.jsxs)("li",{children:[e.name," ",e.number," ",Object(o.jsx)(x,{person:e,persons:t,setPersons:r,setNotification:c})]},e.name)}))})})},N=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],i=Object(r.useState)(""),a=Object(s.a)(i,2),u=a[0],d=a[1],f=Object(r.useState)(""),b=Object(s.a)(f,2),j=b[0],m=b[1],h=Object(r.useState)(""),x=Object(s.a)(h,2),N=x[0],w=x[1],y=Object(r.useState)(null),S=Object(s.a)(y,2),k=S[0],P=S[1];return Object(r.useEffect)((function(){l().then((function(e){c(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(p,{notification:k}),Object(o.jsx)(O,{setSearchName:w}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(g,{persons:t,setPersons:c,newName:u,newNumber:j,setNewName:d,setNumber:m,setNotification:P}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(v,{searchName:N,persons:t,setPersons:c,setNotification:P})]})};i.a.render(Object(o.jsx)(N,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.17cdf44d.chunk.js.map
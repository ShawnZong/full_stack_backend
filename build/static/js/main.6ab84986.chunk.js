(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(2),c=n(14),i=n.n(c),s=n(3),a=n(4),u=n.n(a),d="/api/persons",l=function(){return u.a.get(d).then((function(e){return e.data}))},b=function(e){return u.a.post(d,e).then((function(e){return e.data}))},f=function(e,t){return u.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},j=function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},h={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},p=function(e){var t=e.notification;if(null===t)return null;var n=h;return"green"===t.type&&(n=m),Object(r.jsx)("div",{style:n,children:t.message})},O=function(e){var t=e.setSearchName;return Object(r.jsxs)("div",{children:["filter shown with",Object(r.jsx)("input",{onChange:function(e){t(e.target.value)}})]})},g=function(e){var t=e.persons,n=e.setPersons,o=e.newName,c=e.setNewName,i=e.newNumber,s=e.setNumber,a=e.setNotification;return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=t.find((function(e){return e.name===o}));if(t.includes(r)){if(window.confirm("".concat(o," is already added to phonebook, replace the old number with a new one?"))){var c={name:o,number:i};f(r.id,c).then((function(e){n(t.map((function(t){return t.id!==e.id?t:e}))),a({message:"Updated ".concat(e.name),type:"green"}),setTimeout((function(){a(null)}),5e3)})).catch((function(e){a({message:e.response.data.error,type:"red"}),setTimeout((function(){a(null)}),5e3)}))}}else b({name:o,number:i}).then((function(e){n(t.concat(e)),a({message:"Added ".concat(e.name),type:"green"}),setTimeout((function(){a(null)}),5e3)})).catch((function(e){a({message:e.response.data.error,type:"red"}),setTimeout((function(){a(null)}),5e3)}))},children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{onChange:function(e){c(e.target.value)}})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{onChange:function(e){s(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var t=e.person,n=e.persons,o=e.setPersons,c=e.setNotification;return Object(r.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name," ?"))&&(j(t.id),o(n.filter((function(e){return e.id!==t.id}))),c({message:"Deleted ".concat(t.name),type:"red"}),setTimeout((function(){c(null)}),5e3))},children:"delete"})},v=function(e){var t=e.searchName,n=e.persons,o=e.setPersons,c=e.setNotification,i=n.filter((function(e){return!!e.name.toLocaleLowerCase().includes(t)}));return Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:i.map((function(e){return Object(r.jsxs)("li",{children:[e.name," ",e.number," ",Object(r.jsx)(x,{person:e,persons:n,setPersons:o,setNotification:c})]},e.name)}))})})},N=function(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(""),a=Object(s.a)(i,2),u=a[0],d=a[1],b=Object(o.useState)(""),f=Object(s.a)(b,2),j=f[0],m=f[1],h=Object(o.useState)(""),x=Object(s.a)(h,2),N=x[0],w=x[1],y=Object(o.useState)(null),S=Object(s.a)(y,2),k=S[0],P=S[1];return Object(o.useEffect)((function(){l().then((function(e){c(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(p,{notification:k}),Object(r.jsx)(O,{setSearchName:w}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(g,{persons:n,setPersons:c,newName:u,newNumber:j,setNewName:d,setNumber:m,setNotification:P}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(v,{searchName:N,persons:n,setPersons:c,setNotification:P})]})};i.a.render(Object(r.jsx)(N,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.6ab84986.chunk.js.map